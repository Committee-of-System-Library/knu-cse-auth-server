<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>학생증 QR 인증</title>
    <link rel="stylesheet" th:href="@{/css/qr-auth.styled.css}" />
    <link rel="stylesheet" th:href="@{/css/modal.styled.css}" />
</head>

<body>

    <div class="qrAuthWrapper">
        <!-- 좌측 사이드바 -->
        <aside class="qrAuthSidebar">
            <h1 class="sidebarTitle">QR 인증</h1>
            <div class="menuList">
                <div class="menuItem active" id="menuQrAuth">실시간 QR 스캔</div>
            </div>
        </aside>

        <!-- 오른쪽 메인 컨텐츠 영역 -->
        <div class="qrAuthContent">
            <h2 class="qrAuthTitle">경북대학교 컴퓨터학부 학생증 QR 인증</h2>
            <p class="qrAuthSubtitle">실시간 카메라로 QR을 스캔합니다.</p>

            <!-- 상단 옵션 -->
            <div class="qrOptionRow">
                <label>
                    <input type="checkbox" id="duesOnlyCheck" />
                    학생회비 납부자만
                </label>
                <button id="startBtn" class="qrStartButton">카메라 시작</button>
                <button id="endBtn" class="qrEndButton" disabled>종료하기</button>
            </div>

            <!-- 스캔 영역 + 결과 영역 -->
            <div class="qrScanWrapper">
                <!-- 카메라 미리보기 -->
                <div class="qrCameraArea">
                    <video id="cameraPreview" autoplay muted playsinline></video>
                </div>
                <!-- 스캔 결과목록 -->
                <div class="qrResultArea">
                    <h3>인증된 학생 목록</h3>

                    <div class="scannedTableWrapper">
                        <table class="scannedListTable">
                            <thead>
                                <tr>
                                    <!-- 체크박스 열 제거 -->
                                    <th>학번</th>
                                    <th>이름</th>
                                    <th>납부 여부</th>
                                </tr>
                            </thead>
                            <tbody id="scannedList"></tbody>
                        </table>
                    </div>

                    <!-- 저장 버튼 -->
                    <div class="qrButtonRow">
                        <button id="saveLogBtn" class="qrSaveLogButton" disabled>로그 저장</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 공용 모달 -->
    <div th:replace="modal :: myModalFragment"></div>

    <!-- jsQR 라이브러리 & qr-auth 스크립트 -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script th:src="@{/js/qr-auth.script.js}"></script>
</body>

</html>